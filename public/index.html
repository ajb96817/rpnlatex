<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="description" content="rpnlatex" />
    <title>rpnlatex</title>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    <div id="helptext" style="display: none;">
      <div class="version_info">rpnlatex v1.1.4</div>
      <h1>User Guide</h1>
      <p>
        This is a mathematical scratchpad meant for quickly entering and manipulating formulas.  It runs as a standalone
        web application (no server needed) and generates LaTeX-compatible typesetting code.
      </p>
      <p>
        Use the up and down arrow keys (or <strong>k</strong> and <strong>j</strong>) to scroll this help text.
        Other keys will return you to the editor.
      </p>
      <p>
        The screen is divided into two sections: the <em>stack</em> and the <em>document</em>.  The stack is where
        text and math expressions are built up; once you have built an expression on the stack that you want to keep,
        you can transfer it to the document for storage.  The stack is for temporary use while you are
        working on something to place into the document.
      </p>
      <p>
        Expressions are entered using <em>reverse Polish notation</em> (RPN) which means
        that operands come before their operators.  For example, to enter the expression <code>x+y</code> you would
        first type <strong>x</strong>, then <strong>y</strong> followed by <strong>+</strong> to apply the addition
        operation.
      </p>
      <p>
        The stack is displayed bottom-up; that is, the item most recently placed on the stack is the one shown at
        the bottom of the screen.  The less recent items are then stacked up above it.
        Editor operations always work with the first few items shown at the bottom of the screen (known, confusingly, as
        the "stack top").  In this document, the labels <em>x</em>, <em>y</em> and <em>z</em> are used to refer to
        these first few items.
      </p>
      <p>
        Note that items on the stack have a small colored bar shown to the left of them.  This indicates the item's "type",
        which can be either a symbolic expression (grey), a piece of text (blue), or a separator (green).
      </p>
      <p>
        This editor is designed to be operated entirely from the keyboard.  Most operations can be performed using
        either single keystrokes or pairs of keystrokes (a <em>prefix</em> key followed by a <em>subcommand</em> key).
      </p>

      <h2>Single-Key Commands</h2>
      <ul class="keybindings">
        <li><span class="keybinding">?</span> Show this help text.</li>
        <li>
          <span class="keybinding">a-z</span> <span class="keybinding">A-Z</span> <span class="keybinding">0-9</span>
          Letters and numbers place single-character strings onto the stack.
        </li>
        <li>
          <span class="keybinding">@</span> <span class="keybinding">#</span>
          <span class="keybinding">*</span> <span class="keybinding">~</span>
          These keys also place the corresponding symbol onto the stack.
        </li>
        <li>
          <span class="keybinding">&nbsp;</span> <em>(space)</em> Concatenate the top two stack entries.
        <li>
          <span class="keybinding">`</span> <em>(backtick)</em> or <span class="keybinding">^</span> 
          Make superscript: <code>y\enspace x \to y^x</code>
        </li>
        <li><span class="keybinding">Enter</span> or <span class="keybinding">_</span>
          Make subscript: <code>y\enspace x \to y_x</code>
        </li>
        <li><span class="keybinding">Backspace</span> Drop the top item from the stack.</li>
        <li>
          <span class="keybinding">!</span>
          Append a <tt>!</tt> to the stack top (factorial notation).
        </li>
        <li>
          <span class="keybinding">(</span> <span class="keybinding">[</span> <span class="keybinding">{</span>
          Enclose the stack top in paired delimiters: <code>(x), [x], \{x\}</code>.
          These delimiters automatically adjust to fit their contents.
        </li>
        <li><span class="keybinding">]</span> Apply a <strong>bold font</strong> to the stack top.</li>
        <li>
          <span class="keybinding">+</span> <span class="keybinding">-</span>
          <span class="keybinding">&lt;</span> <span class="keybinding">&gt;</span>
          Join two expressions with the corresponding operator between them.
        </li>
        <li>
          <span class="keybinding">&uarr;</span> <span class="keybinding">&darr;</span>
          <em>(up/down arrows)</em> Move the document selection indicator up or down.
        </li>
        <li>
          <span class="keybinding">&larr;</span> <span class="keybinding">&rarr;</span>
          <em>(left/right arrows)</em> Scroll the stack panel left or right if the contents are too wide.
        </li>
        <li>
          <span class="keybinding">Shift &uarr;</span> <span class="keybinding">Shift &darr;</span>
          <em>(shift+up/down)</em> Shift the selected document item up or down within the document.
        </li>
      </ul>

      <h2>Prefix Keys</h2>
      <p>
        All other operations require <em>prefix keys</em> to be pressed first.  These keys
        switch into a corresponding <em>mode</em>.  The current mode is displayed in grey in the upper-right
        corner of the stack.  Each mode has its own keymap of operations, which are detailed in the following
        sections.
      </p>
      <ul class="keybindings">
        <li><span class="keybinding">\</span> Input a longer character string with <a href="#text_entry">math entry</a> mode.</li>
        <li><span class="keybinding">&quot;</span> Create a text object with <a href="#text_entry">text entry</a> mode.</li>
        <li><span class="keybinding">Tab</span> <a href="#stack">Stack manipulation</a> and other utilities.</li>
        <li><span class="keybinding">&#39;</span> <em>(apostrophe)</em> Create standalone <a href="#symbols">math symbols</a>.</li>
        <li><span class="keybinding">.</span> <em>(period)</em> Add a <a href="#decorations">decoration</a> to the stack top.</li>
        <li><span class="keybinding">,</span> <em>(comma)</em> Combine two items into an <a href="#infix">infix expression</a>.</li>
        <li><span class="keybinding">=</span> Combine two items with a <a href="#relational">relational operator</a>.</li>
        <li><span class="keybinding">/</span> Apply various <a href="#operators">functions and operators</a> to arguments from the stack.</li>
        <li><span class="keybinding">/</span><span class="keybinding">d</span> Build different kinds of <a href="#derivatives">derivatives</a>.</li>
        <li><span class="keybinding">/</span><span class="keybinding">i</span> Apply <a href="#integrals">integral limits</a>.</li>
        <li><span class="keybinding">)</span> Add paired <a href="#delimiters">delimiters</a> to the stack top.</li>
        <li><span class="keybinding">}</span> Build <a href="#custom_delimiters">custom delimiter</a> structures.</li>
        <li><span class="keybinding">|</span> Manipulate <a href="#arrays">arrayed structures</a> like matrices, vectors, or lists.</li>
        <li><span class="keybinding">;</span> Insert <a href="#greek">lowercase Greek</a> letters.</li>
        <li><span class="keybinding">:</span> Insert <a href="#greek">uppercase Greek</a> letters.</li>
        <li><span class="keybinding">&</span>
          Insert script-style uppercase letters such as: <code>\mathscr{ABCDE}</code>;
          <span class="keybinding">&</span><span class="keybinding">&</span> inserts a literal &.
        </li>
        <li><span class="keybinding">%</span>
          Insert calligraphic-style uppercase letters such as: <code>\mathcal{ABCDE}</code>;
          <span class="keybinding">%</span><span class="keybinding">%</span> inserts a literal %.
        </li>
        <li><span class="keybinding">$</span> Change <a href="#configuration">configuration settings</a>.</li>
        <li>
          <span class="keybinding">Ctrl</span>
          Some <a href="#control_keys">Control key</a> shortcuts are also available.
        </li>
      </ul>

      <h2>
        <a name="text_entry">Math and Text Entry</a>
        <span class="keybinding">\</span>&nbsp;<span class="keybinding">&quot;</span>
      </h2>
      <p>
        The <span class="keybinding">\</span> prefix starts <em>math entry</em> mode.  A small input field
        will be shown where you can type letters and numbers.  <span class="keybinding">Enter</span> will place
        what you have typed onto the stack as math text.  This gives the same result as entering individual
        characters and concatenating them with <span class="keybinding">&nbsp;</span> (space).  For example,
        these are two equivalent ways of entering the number 123:
        <ul>
          <li><span class="keybinding">1</span><span class="keybinding">2</span><span class="keybinding">3</span><span class="keybinding">&nbsp;</span><span class="keybinding">&nbsp;</span></li>
          <li><span class="keybinding">\</span><span class="keybinding">1</span><span class="keybinding">2</span><span class="keybinding">3</span><span class="keybinding">Enter</span></li>
        </ul>
        <span class="keybinding">Esc</span> will cancel math entry mode.
        If you use <span class="keybinding">Shift+Enter</span> instead of <span class="keybinding">Enter</span>
        to finish your entry, it will be typeset in a roman (non-italic) font instead of the normal italic math font.
      </p>
      <p>If you type another <span class="keybinding">\</span>
        after the first one, you will instead switch into <em>LaTeX entry</em> mode where you can enter an arbitrary
        LaTeX command.  This can be used to create any standard LaTeX symbol.
        For example: <tt>\\boxdot</tt> <code>\to\boxdot</code>
      </p>
      <p>
        The <span class="keybinding">&quot;</span> prefix starts <em>text entry</em> mode which
        is similar to math entry mode but creates <em>text objects</em>.  Text objects are shown with
        a blue bar to the left (instead of grey) and differ from normal math objects in a few important ways:
        <ul>
          <li>They are meant for explanatory text, comments, etc., rather than being standalone math formulas.</li>
          <li>They are shown in a roman (non-italic) font and will wrap around to multiple lines if needed.</li>
          <li>
            They can be concatenated with other text objects or with math formulas using <span class="keybinding">&nbsp;</span>
            (space) or combined via <a href="#infix">infix</a> or <a href="#relational">relational</a> operators.  Math formulas
            combined with text objects this way become part of the text and are displayed in a more compact inline format.
          </li>
          <li>
            Finishing the text entry with <span class="keybinding">Shift+Enter</span> will
            create a section header instead (with a larger font and underline).  You can later toggle
            whether or not the text object is a section header with the
            <span class="keybinding">/</span><span class="keybinding">&quot;</span> command.
          </li>
          <li>
            Typing <tt>[]</tt> in a text object will create a <a href="#placeholders">placeholder</a>
            at that location for substituting a math formula later.
          </li>
        </ul>
      </p>

      <h2>
        <a name="stack">Stack Manipulation and Utilities</a>
        <span class="keybinding">Tab</span>
      </h2>
      <p>
        The following commands manipulate the stack with traditional RPN operations.
        These can optionally take numeric <em>prefix arguments</em> which specify the number
        of stack items to operate on.  Prefix arguments are entered by typing one or more digits
        after the <span class="keybinding">Tab</span> and before one of the following subcommand
        keys.  Also, instead of a digit, * (asterisk) may be used to indicate that the operation
        should apply to the entire stack.  For example, to reverse the entire stack you can type
        <span class="keybinding">Tab</span><span class="keybinding">*</span><span class="keybinding">a</span>.
        In the descriptions below, N refers to the prefix argument if given, otherwise the default is used.
      </p>
      <ul class="keybindings">
        <li><span class="keybinding">Enter</span> <em>(Dup)</em> Duplicate the top N items (default 1).</li>
        <li><span class="keybinding">a</span> <em>(Swap)</em> Reverse the order of the top N items (default 2).</li>
        <li><span class="keybinding">d</span> <em>(Drop)</em> Remove the top N items (default 1).</li>
        <li><span class="keybinding">n</span> <em>(Nip)</em> Delete the Nth item from the top (default 2).</li>
        <li><span class="keybinding">o</span> <em>(Over)</em> Put a copy of the Nth item from the top onto the stack (default 2).</li>
        <li><span class="keybinding">r</span> <em>(Rotate)</em> Move the Nth item from the top to the stack top (default 3). </li>
        <li><span class="keybinding">t</span> <em>(Tuck)</em> Copy the stack top into the Nth stack position (default 2).</li>
        <li><span class="keybinding">u</span> <em>(Unrotate)</em> Move the stack top to the Nth stack position (default 3).</li>
      </ul>
      <p>
        <strong>NOTE:</strong>
        <span class="keybinding">Backspace</span> can also be used to drop single items from the stack
        instead of <span class="keybinding">Tab</span><span class="keybinding">d</span>.
      </p>
      <p>
        There are also some utility functions available through this
        <span class="keybinding">Tab</span> prefix:
      </p>
      <ul class="keybindings">
        <li>
          <span class="keybinding">c</span>
          Copy the stack top into an internal clipboard slot.
          The copied item can later be pasted to the stack with
          <span class="keybinding">Tab</span><span class="keybinding">v</span>.
        </li>
        <li>
          <span class="keybinding">f</span> Open the File Manager (see below).
        </li>
        <li>
          <span class="keybinding">i</span>
          Move N items from the stack into the document at the current selection position (default 1).
        </li>
        <li>
          <span class="keybinding">I</span>
          Copy N items from the stack into the document at the current selection position without removing
          them from the stack (default 1).
        </li>
        <li>
          <span class="keybinding">j</span>
          Move N items from the document back onto the stack (default 1).
        </li>
        <li>
          <span class="keybinding">J</span>
          Copy N items from the document back onto the stack without removing
          them from the document (default 1).
        </li>
        <li>
          <span class="keybinding">l</span>
          Recenter the document view around the current document selection.
        </li>
        <li>
          <span class="keybinding">s</span>
          Save the current document to browser storage.
        </li>
        <li>
          <span class="keybinding">v</span>
          Paste the item most recently copied to the clipboard
          (with <span class="keybinding">Tab</span><span class="keybinding">c</span>)
          onto the stack.
        </li>
        <li><span class="keybinding">Tab</span>
          <em>Undo:</em> Revert stack and document back to the last 
          state they were in.  Up to 100 undo states are available.
          <span class="keybinding">Ctrl+z</span> also performs undo.
        </li>
        <li>
          <span class="keybinding">.</span> <em>Redo:</em> Replay states that were
          previously undone.  You can also use <span class="keybinding">Ctrl+y</span>.
        </li>
        <li>
          <span class="keybinding">!</span> <em>Export document:</em> Copy the document content to the clipboard as LaTeX text.
        </li>
        <li>
          <span class="keybinding">@</span> <em>Export stack item(s):</em> Copy the top N stack items (default 1) to the clipboard as LaTeX text.
        </li>
        <li>
          <span class="keybinding">&larr;</span> <span class="keybinding">&rarr;</span>
          <em>(left/right arrows)</em> Scroll the document panel left or right if the contents are too wide.
        </li>
      </ul>

      <h2>
        <a name="files">File Management</a>
        <span class="keybinding">Tab</span><span class="keybinding">f</span>
      </h2>
      <p>
        <span class="keybinding">Tab</span><span class="keybinding">f</span>
        opens the File Manager popup panel.
        If your browser supports it, you can save and manage separate documents in
        <a href="https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API" target="_blank">indexedDB</a> storage.
        Your data persists between browser sessions.  Each document has a filename but there is only one level
        of storage - no subfolders.
        There are also some utilities for exporting and importing your data as .zip files.
      </p>
      <ul class="keybindings">
        <li>
          <span class="keybinding">&uarr;&darr;</span>
          The arrow keys change the selection in your list of saved documents.
        </li>
        <li><span class="keybinding">Enter</span> Open the currently selected file.</li>
        <li><span class="keybinding">d</span> Delete the currently selected file.</li>
        <li><span class="keybinding">s</span>
          Save the current document to browser storage.
          You can also use <span class="keybinding">Tab</span><span class="keybinding">s</span>
          or <span class="keybinding">Ctrl+s</span> from anywhere without opening
          the file manager first.
        </li>
        <li><span class="keybinding">S</span> Save the current document with a new filename.</li>
        <li><span class="keybinding">n</span> Start a new, blank document.</li>
      </ul>
      <p>
        The <em>Export/Import</em> section of the file manager allows you to download your document
        storage as a .zip file for backup purposes, and to restore your storage from a previously-saved
        .zip file.  The .zip file will contain one file per document, in JSON text format.
      </p>
      <p>
        To download a .zip archive, click the 'Prepare Export' link; this will build the archive
        from your browser's storage and then present you a download link.
      </p>

      <h2>
        <a name="symbols">Math Symbols</a>
        <span class="keybinding">&#39;</span>
      </h2>
      <p>
        Assorted standalone math symbols.  These all put exactly one object onto the stack.
      </p>
      <table class="keybindings"><tbody>
          <tr>
            <td><span class="keybinding">0</span> <code>\varnothing</code></td>
            <td><span class="keybinding">1</span> <code>-1</code></td>
            <td><span class="keybinding">2</span> <code>\frac{1}{2}</code></td>
            <td><span class="keybinding">3</span> <code>1/2</code></td>
            <td><span class="keybinding">8</span> <code>\infty</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">a</span> <code>\forall</code></td>
            <td><span class="keybinding">c</span> <code>\cdot</code></td>
            <td><span class="keybinding">C</span> <code>\bigcap</code></td>
            <td><span class="keybinding">d</span> <code>\partial</code></td>
            <td><span class="keybinding">e</span> <code>\exists</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">h</span> <code>\hslash</code></td>
            <td><span class="keybinding">i</span> <code>\int</code></td>
            <td><span class="keybinding">I</span> <code>\iint</code></td>
            <td><span class="keybinding">l</span> <code>\ell</code></td>
            <td><span class="keybinding">M</span> <code>\mp</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">o</span> <code>\circ</code></td>
            <td><span class="keybinding">p</span> <code>\prod</code></td>
            <td><span class="keybinding">P</span> <code>\pm</code></td>
            <td><span class="keybinding">s</span> <code>\sum</code></td>
            <td><span class="keybinding">t</span> <code>\therefore</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">U</span> <code>\bigcup</code></td>
            <td><span class="keybinding">v</span> <code>\vee</code></td>
            <td><span class="keybinding">w</span> <code>\wedge</code></td>
            <td><span class="keybinding">y</span> <code>\oint</code></td>
            <td><span class="keybinding">Y</span> <code>\oiint</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">.</span> <code>\dots</code></td>
            <td><span class="keybinding">&gt;</span> <code>\cdots</code></td>
            <td><span class="keybinding">-</span> <code>-</code></td>
            <td><span class="keybinding">+</span> <code>+</code></td>
            <td><span class="keybinding">*</span> <code>\star</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">|</span> <code>|</code></td>
            <td><span class="keybinding">?</span> <code>?</code></td>
            <td><span class="keybinding">!</span> <code>!</code></td>
            <td><span class="keybinding">,</span> <code>,</code></td>
            <td><span class="keybinding">;</span> <code>;</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">:</span> <code>:</code></td>
            <td><span class="keybinding">`</span> <code>`</code></td>
            <td><span class="keybinding">&uarr;</span> <code>\uparrow</code></td>
            <td><span class="keybinding">&darr;</span> <code>\downarrow</code></td>
            <td></td>
          </tr>
          <tr>
            <td colspan="2">
              <span class="keybinding">&nbsp;</span> (Blank)
            </td>
            <td colspan="3">
              <span class="keybinding">&#39;</span>
              <code>\htmlClass{defer_expr}{\blacksquare}</code>
              (<a href="#placeholders">Placeholder</a>)
            </td>
          </tr>
      </tbody></table>
      <p>
        Also, <span class="keybinding">=</span> puts a &quot;separator&quot; onto
        the stack, which can be useful to visually separate parts of the document.
      </p>

      <h2>
        <a name="decorations">Decorations</a>
        <span class="keybinding">.</span>
      </h2>
      <p>
        These all modify a single item on the stack.
      </p>
      <table class="keybindings"><tbody>
          <tr>
            <td><span class="keybinding">0</span> <code>x_0</code></td>
            <td><span class="keybinding">1</span> <code>x^{-1}</code></td>
            <td><span class="keybinding">2</span> <code>x^2</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">3</span> <code>x^3</code></td>
            <td><span class="keybinding">4</span> <code>x^4</code></td>
            <td><span class="keybinding">8</span> <code>x\to\infty</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">A</span> <code>\acute x</code></td>
            <td><span class="keybinding">b</span> <code>\mathbb X</code> (blackboard)</td>
            <td><span class="keybinding">c</span> <code>1-x</code> (complement)</td>
          </tr>
          <tr>
            <td><span class="keybinding">C</span> <code>\color{blue}{x}</code> (color; see below)</td>
            <td><span class="keybinding">d</span> <code>x^\dagger</code></td>
            <td><span class="keybinding">D</span> <code>x^\ddagger</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">e</span> <code>\bold{x}</code> (bold roman)</td>
            <td><span class="keybinding">f</span> <code>x/2</code> (fixed size)</td>
            <td><span class="keybinding">F</span> <code>x/2</code> (flex size)</td>
          </tr>
          <tr>
            <td><span class="keybinding">g</span> <code>\mathring x</code></td>
            <td><span class="keybinding">G</span> <code>\grave x</code></td>
            <td><span class="keybinding">h</span> <code>\hat x</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">H</span> or <span class="keybinding">w</span> <code>\widehat{x\dots}</code></td>
            <td><span class="keybinding">i</span> <code>x^{-}</code></td>
            <td><span class="keybinding">I</span> <code>x^{+}</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">k</span> <code>\mathfrak X</code> (Fraktur)</td>
            <td><span class="keybinding">l</span> <code>x_\parallel</code></td>
            <td><span class="keybinding">m</span> <code>\mathtt x</code> (monospace)</td>
          </tr>
          <tr>
            <td><span class="keybinding">M</span> <code>\mp x</code></td>
            <td><span class="keybinding">o</span> <code>\bar x</code></td>
            <td><span class="keybinding">O</span> <code>\overline{x\dots}</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">p</span> <code>x_\perp</code></td>
            <td><span class="keybinding">P</span> <code>\pm x</code></td>
            <td><span class="keybinding">r</span> <code>\mathrm x</code> (roman)</td>
          </tr>
          <tr>
            <td><span class="keybinding">s</span> <code>\mathsf x</code> (sans-serif)</td>
            <td><span class="keybinding">t</span> <code>\to x</code></td>
            <td><span class="keybinding">T</span> <code>\widetilde{x\dots}</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">u</span> <code>\breve x</code></td>
            <td><span class="keybinding">U</span> <code>\utilde x</code></td>
            <td><span class="keybinding">v</span> <code>\vec x</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">V</span> <code>\check x</code></td>
            <td><span class="keybinding">W</span> <code>\widecheck{x\dots}</code></td>
            <td><span class="keybinding">x</span> <code>\boxed x</code> (box)</td>
          </tr>
          <tr>
            <td><span class="keybinding">X</span> <code>\sout x</code> (crossout)</td>
            <td><span class="keybinding">.</span> <code>\dot x</code></td>
            <td><span class="keybinding">&quot;</span> <code>\ddot x</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">&nbsp;</span> <code>x\,</code> (append space)</td>
            <td><span class="keybinding">&#39;</span> <code>x'</code></td>
            <td><span class="keybinding">*</span> <code>x^{*}</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">=</span> <code>\Rightarrow x</code></td>
            <td><span class="keybinding">-</span> <code>-x</code></td>
            <td><span class="keybinding">+</span> <code>+x</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">`</span> <code>x^T</code> (transpose)</td>
            <td><span class="keybinding">/</span> <code>\cancel x</code> (cancel)</td>
            <td><span class="keybinding">\</span> <code>1/x</code> (flex size)</td>
          </tr>
          <tr>
            <td><span class="keybinding">_</span> <code>\underline x</code></td>
            <td><span class="keybinding">~</span> <code>\tilde x</code></td>
            <td></td>
          </tr>
      </tbody></table>
      <p>
        A few colors can be applied via the prefix
        <span class="keybinding">.</span><span class="keybinding">C</span>; the following key selects one of:
      </p>
      <p>
        <span class="keybinding">b</span> blue
        <span class="keybinding">g</span> green
        <span class="keybinding">h</span> grey
        <span class="keybinding">k</span> black
        <span class="keybinding">o</span> orange
        <span class="keybinding">p</span> purple
        <span class="keybinding">r</span> red
        <span class="keybinding">y</span> yellow
      </p>

      <h2>
        <a name="infix">Infix Expressions</a>
        <span class="keybinding">,</span>
      </h2>
      <p>
        These commands combine the top two stack items by placing a mathematical operator between them.
      </p>
      <table class="keybindings"><tbody>
          <tr>
            <td><span class="keybinding">b</span> <code>x\bullet y</code></td>
            <td><span class="keybinding">c</span> <code>x\cap y</code></td>
            <td><span class="keybinding">d</span> <code>x\setminus y</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">e</span> <code>x,\dots,y</code></td>
            <td><span class="keybinding">f</span> <code>x\quad\mathrm{if}\quad y</code></td>
            <td><span class="keybinding">F</span> <code>x\quad\mathrm{iff}\quad y</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">g</span> <code>x\gets y</code></td>
            <td><span class="keybinding">k</span> <code>\left.x\,\middle\vert\,y\right.</code></td>
            <td><span class="keybinding">l</span> <code>x\parallel y</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">m</span> <code>x\mapsto y</code></td>
            <td><span class="keybinding">M</span> <code>x\mp y</code></td>
            <td><span class="keybinding">n</span> <code>x\quad\mathrm{when}\quad y</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">o</span> <code>x\circ y</code></td>
            <td><span class="keybinding">p</span> <code>x\perp y</code></td>
            <td><span class="keybinding">P</span> <code>x\pm y</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">q</span> <code>x\quad\mathrm{and}\quad y</code></td>
            <td><span class="keybinding">Q</span> <code>x\quad\mathrm{or}\quad y</code></td>
            <td><span class="keybinding">r</span> <code>x\quad\mathrm{for}\quad y</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">s</span> <code>x\, y</code></td>
            <td><span class="keybinding">t</span> <code>x\to y</code></td>
            <td><span class="keybinding">T</span> <code>x\longrightarrow y</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">u</span> <code>x\cup y</code></td>
            <td><span class="keybinding">v</span> <code>x\vee y</code></td>
            <td><span class="keybinding">w</span> <code>x\wedge y</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">x</span> <code>x\times y</code></td>
            <td><span class="keybinding">X</span> <code>x\otimes y</code></td>
            <td><span class="keybinding">[</span> <code>x\llcorner y</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">]</span> <code>x\lrcorner y</code></td>
            <td><span class="keybinding">|</span> <code>x | y</code></td>
            <td><span class="keybinding">=</span> <code>x\Rightarrow y</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">-</span> <code>x\ominus y</code></td>
            <td><span class="keybinding">+</span> <code>x\oplus y</code></td>
            <td><span class="keybinding">.</span> <code>x\cdot y</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">&gt;</span> <code>x\cdots y</code></td>
            <td><span class="keybinding">,</span> <code>x,y</code></td>
            <td><span class="keybinding">&nbsp;</span> <code>x,\,y</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">:</span> <code>x : y</code></td>
            <td><span class="keybinding">;</span> <code>x;\,y</code></td>
            <td><span class="keybinding">`</span> <code>x^T y</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">%</span> <code>x\pmod y</code></td>
            <td><span class="keybinding">*</span> <code>x*y</code></td>
            <td><span class="keybinding">/</span> <code>x/y</code> (fixed size)</td>
          </tr>
          <tr>
            <td><span class="keybinding">\</span> <code>x/y</code> (flex size)</td>
            <td></td>
            <td></td>
          </tr>
      </tbody></table>
      <p>
        The following subcommands are also available in this mode:
      </p>
      <ul class="keybindings">
        <li>
          <span class="keybinding">a</span> <em>Apply:</em> takes three
          items from the stack: the stack top is the infix symbol which will be placed between the other two items.
          This can be useful if the infix operator you want is not available directly as a subcommand here.
        </li>
        <li>
          <span class="keybinding">O</span> <em>Overset:</em> takes an existing infix expression
          like <code>x=y</code> and another item; the second item will be placed above the
          operator of the first.  For example: <code>x \overset{?}{=} y</code>
        </li>
        <li>
          <span class="keybinding">U</span> <em>Underset:</em> the same, but puts the item underneath instead of above.
        </li>
      </ul>

      <h2>
        <a name="relational">Relational Operators</a>
        <span class="keybinding">=</span>
      </h2>
      <p>
        Similar to <span class="keybinding">,</span>, these commands combine two items
        into an "equation" by placing a relational operator between them.
      </p>
      <table class="keybindings"><tbody>
          <tr>
            <td><span class="keybinding">a</span> <code>x\approx y</code></td>
            <td><span class="keybinding">c</span> <code>x\cong y</code></td>
            <td><span class="keybinding">e</span> <code>x\equiv y</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">E</span> <code>x\iff y</code></td>
            <td><span class="keybinding">g</span> <code>x &gt; y</code></td>
            <td><span class="keybinding">G</span> <code>x\gg y</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">i</span> <code>x\in y</code></td>
            <td><span class="keybinding">I</span> <code>x\notin y</code></td>
            <td><span class="keybinding">l</span> <code>x &lt; y</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">L</span> <code>x\ll y</code></td>
            <td><span class="keybinding">!</span> or <span class="keybinding">n</span> <code>x\ne y</code></td>
            <td><span class="keybinding">p</span> <code>x\propto y</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">=</span> or <span class="keybinding">q</span> <code>x = y</code></td>
            <td><span class="keybinding">s</span> <code>x\subseteq y</code></td>
            <td><span class="keybinding">S</span> <code>x\subset y</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">&lt;</span> or <span class="keybinding">[</span> <code>x\le y</code></td>
            <td><span class="keybinding">&gt;</span> or <span class="keybinding">]</span> <code>x\ge y</code></td>
            <td><span class="keybinding">:</span> <code>x\coloneqq y</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">~</span> or <span class="keybinding">t</span> <code>x\sim y</code></td>
            <td><span class="keybinding">|</span> <code>x\vDash y</code></td>
            <td></td>
          </tr>
      </tbody></table>

      <h2>
        <a name="operators">Functions and Operators <span class="keybinding">/</span></a>
      </h2>
      <ul class="keybindings">
        <li><span class="keybinding">1</span> Reciprocal: <code>x \to \frac{1}{x}</code></li>
        <li><span class="keybinding">a</span> Apply a LaTeX operator to a single argument: <code>\backslash\textrm{sqrt}\enspace x \to \sqrt{x}</code></li>
        <li><span class="keybinding">A</span> Apply a LaTeX operator to two arguments: <code>\backslash\textrm{overset}\enspace y\enspace x \to \overset{y}{x}</code></li>
        <li><span class="keybinding">b</span> Binomial coefficient notation: <code>y\enspace x \to \binom{y}{x}</code></li>
        <li><span class="keybinding">d</span> Prefix for building <a href="#derivatives">derivative</a> expressions.</li>
        <li><span class="keybinding">D</span> <code>\det{x}</code></li>
        <li>
          <span class="keybinding">e</span> <code>\mathrm{e}^x</code>
          &nbsp;&nbsp;
          <span class="keybinding">E</span> <code>\exp x</code>
        </li>
        <li>
          <span class="keybinding">g</span> <code>\argmin\limits_x</code>
          &nbsp;&nbsp;
          <span class="keybinding">G</span> <code>\argmax\limits_x</code>
        </li>
        <li><span class="keybinding">i</span> Prefix for applying <a href="#integrals">integral</a> limits.</li>
        <li><span class="keybinding">k</span> <code>f\enspace y\enspace x \to f(y|x)</code></li>
        <li>
          <span class="keybinding">l</span> <code>\lim\limits_x</code>
          <span class="keybinding">u</span> <code>\inf\limits_x</code>
          <span class="keybinding">U</span> <code>\sup\limits_x</code>
        </li>
        <li>
          <span class="keybinding">m</span> <code>\min{x}</code>
          &nbsp;&nbsp;
          <span class="keybinding">M</span> <code>\max{x}</code>
        </li>
        <li>
          <span class="keybinding">n</span> <code>\ln{x}</code>
          &nbsp;&nbsp;
          <span class="keybinding">N</span> <code>\log{x}</code>
        </li>
        <li>
          <span class="keybinding">2</span><span class="keybinding">n</span> <code>\lg{x}</code>
          &nbsp;&nbsp;
          <span class="keybinding">2</span><span class="keybinding">N</span> <code>\log_2{x}</code>
        </li>
        <li><span class="keybinding">o</span> <code>f\enspace x \to f(x)</code></li>
        <li><span class="keybinding">r</span> <code>f\enspace y\enspace x \to f(y,x)</code></li>
        <li>
          <span class="keybinding">p</span> <code>\Pr{(x)}</code> (probability)
          &nbsp;&nbsp;
          <span class="keybinding">P</span> <code>\Pr{(y|x)}</code> (conditional probability)
        </li>
        <li>
          <span class="keybinding">q</span> <code>\sqrt{x}</code>
          &nbsp;&nbsp;
          <span class="keybinding">Q</span> <code>\sqrt[3]{x}</code>
        </li>
        <li>
          <span class="keybinding">s</span> <code>\sin x</code>
          <span class="keybinding">c</span> <code>\cos x</code>
          <span class="keybinding">t</span> <code>\tan x</code>
        </li>
        <li>
          <span class="keybinding">S</span> <code>\sec x</code>
          <span class="keybinding">C</span> <code>\csc x</code>
          <span class="keybinding">T</span> <code>\cot x</code>
        </li>
        <li>
          <span class="keybinding">v</span> <code>x \to \operatorname{Var}(x)</code>
          &nbsp;&nbsp;
          <span class="keybinding">V</span> <code>y\enspace x \to \operatorname{Cov}(y,x)</code>
        </li>
        <li>
          <span class="keybinding">x</span> <code>x \to \mathopen{\mathbb{E}}\left[x\right]</code> (expectation)
          &nbsp;&nbsp;
          <span class="keybinding">X</span> <code>y\enspace x \to \mathopen{\mathbb{E}_x}\left[y\right]</code> (w/ subscript)
        </li>
        <li>
          <span class="keybinding">/</span> <code>y\enspace x \to \displaystyle\frac{y}{x}</code>
        </li>
        <li>
          <span class="keybinding">=</span> <code>z\enspace y\enspace x \to \displaystyle\sum_{z=y}^x</code>
          &nbsp;&nbsp;
          <span class="keybinding">+</span> <code>y\enspace x \to \displaystyle\sum_{y\ge x}</code>
        </li>
        <li>
          <span class="keybinding">[</span> <code>f\enspace x \to f[x]</code>
          &nbsp;&nbsp;
          <span class="keybinding">]</span> <code>f\enspace x \to f\{x\}</code>
        </li>
        <li>
          <span class="keybinding">{</span> <code>y\enspace x \to \overbrace{y}^x</code>
          &nbsp;&nbsp;
          <span class="keybinding">}</span> <code>y\enspace x \to \underbrace{y}_x</code>
        </li>
        <li>
          <span class="keybinding">&lt;</span> or <span class="keybinding">&gt;</span>
          Extract the left or right side of an infix or relational expression.
          For example: <code>x^2 = 1 \to x^2</code>
        </li>
        <li><span class="keybinding">,</span> <em>(comma)</em> Split equation (see below)</li>
        <li><span class="keybinding">;</span> Apply tag (see below)</li>
        <li><span class="keybinding">&#39;</span> <em>(apostrophe)</em> Resolve placeholder (see <a href="#placeholders">Placeholders</a>)</li>
        <li><span class="keybinding">&quot;</span> Toggle whether the stack top is displayed as a section header</li>
        <li>
          <span class="keybinding">Enter</span> <code>z\enspace y\enspace x \to z_y^x</code>
          (shortcut for adding a subscript and superscript at once)
        </li>
      </ul>
      <p>
        <strong>Equation splitting:</strong>
        The <span class="keybinding">/</span><span class="keybinding">,</span>
        command allows for splitting equations across multiple lines.  The stack top must be an expression
        just joined with an <a href="#infix">infix</a> or <a href="#relational">relational</a> operator.
        This command inserts a line break after the operator.  A second application of this command to the
        same expression will change it to break before the operator instead, and a third will put it back to not
        having a line break.  Further line breaks can be inserted after adding more terms and operators
        to the expression.
      </p>
      <p>
        <strong>Tags:</strong>
        The <span class="keybinding">/</span><span class="keybinding">;</span>
        command takes the stack top and adds it as a &quot;tag&quot;
        to the expression beneath it.  The tag is typically a text object created with
        <span class="keybinding">&quot;</span>, but can be any expression.  Tags can be used as equation
        numbers or labels and will be displayed to the right of the tagged item.  Note that any further
        operation on a tagged item will remove the tag, so tags are generally added just before moving
        an item into the document.
      </p>
      <p>
        <strong>Trigonometric functions:</strong> Using <span class="keybinding">-</span> and <span class="keybinding">h</span> before
        trigonometric functions gives inverse and hyperbolic forms of the functions
        (<span class="keybinding">-</span> must come first if you want both).
        You can also use <span class="keybinding">2</span> instead of <span class="keybinding">-</span>
        to get squared instead of inverse variants.  For example:
      </p>
      <ul class="keybindings">
        <li>
          <span class="keybinding">/</span><span class="keybinding">-</span><span class="keybinding">c</span>
          <code>\to \cos^{-1} x</code>
        </li>
        <li>
          <span class="keybinding">/</span><span class="keybinding">h</span><span class="keybinding">T</span>
          <code>\to \coth x</code>
        </li>
        <li>
          <span class="keybinding">/</span><span class="keybinding">-</span><span class="keybinding">h</span><span class="keybinding">S</span>
          <code>\to \operatorname{sech}^{-1} x</code>
        </li>
        <li>
          <span class="keybinding">/</span><span class="keybinding">2</span><span class="keybinding">t</span>
          <code>\to \tan^2 x</code>
        </li>
      </ul>

      <h2>
        <a name="derivatives">Derivative Building <span class="keybinding">/</span><span class="keybinding">d</span></a>
      </h2>
      <p>
        These are some shortcuts for quickly creating common types of expressions involving derivatives and differentials.
      </p>
      <table class="keybindings"><tbody>
          <tr>
            <td><span class="keybinding">j</span> <code>y\enspace x \to \frac{\partial y}{\partial x}</code></td>
            <td><span class="keybinding">J</span> <code>y\enspace x \to \frac{\partial^2 y}{\partial x^2}</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">q</span> <code>x \to \frac{\partial}{\partial x}</code></td>
            <td><span class="keybinding">Q</span> <code>x \to \frac{\partial^2}{\partial x^2}</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">m</span> <code>y\enspace x \to \frac{\partial^2}{\partial y\,\partial x}</code></td>
            <td><span class="keybinding">M</span> <code>f\enspace y\enspace x \to \frac{\partial^2 f}{\partial y\,\partial x}</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">k</span> <code>y\enspace x \to \frac{\mathrm{d}y}{\mathrm{d}x}</code></td>
            <td><span class="keybinding">K</span> <code>y\enspace x \to \frac{\mathrm{d}^2 y}{\mathrm{d}x^2}</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">x</span> <code>x \to \frac{\mathrm{d}}{\mathrm{d}x}</code></td>
            <td><span class="keybinding">X</span> <code>x \to \frac{\mathrm{d}^2}{\mathrm{d}x^2}</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">g</span> <code>x \to \nabla x</code></td>
            <td><span class="keybinding">G</span> <code>x\enspace y \to \nabla_y x</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">.</span> <code>x \to \nabla\cdot x</code></td>
            <td><span class="keybinding">c</span> <code>x \to \nabla\times x</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">l</span> <code>x \to \nabla^2 x</code></td>
            <td><span class="keybinding">L</span> <code>x \to \Box^2 x</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">d</span> <code>x \to \mathrm{d}x</code></td>
            <td><span class="keybinding">2</span> <code>x \to \mathrm{d}^2 x</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">3</span> <code>x \to \mathrm{d}^3 x</code></td>
            <td><span class="keybinding">4</span> <code>x \to \mathrm{d}^4 x</code></td>
          </tr>
          <tr>
            <td colspan="2">
              <span class="keybinding">i</span> or <span class="keybinding">I</span> or <span class="keybinding">&nbsp;</span>
              <code>y\enspace x \to y\,\mathrm{d}x</code> (see below)
            </td>
          </tr>
      </tbody></table>
      <p>
        <span class="keybinding">i</span> and <span class="keybinding">I</span> and <span class="keybinding">&nbsp;</span>
        are meant for attaching a differential to an existing integral expression with appropriate spacing.
        The difference between the three is where the spacing goes:
      </p>
      <ul>
        <li>
          <span class="keybinding">i</span> Space goes before the differential.  This is the usual
          "textbook" case, e.g.
          <code>\int x^2\,\mathrm{d}x</code>
        </li>
        <li>
          <span class="keybinding">I</span> Space goes after the differential, for when you want to
          concatenate the integrand afterwards:
          <code>\int\mathrm{d}x\,x^2</code>
        </li>
        <li>
          <span class="keybinding">&nbsp;</span> No spacing around the differential, for simple cases like
          <code>\int\mathrm{d}x</code>
        </li>
      </ul>

      <h2>
        <a name="integrals">Integral Limits <span class="keybinding">/</span><span class="keybinding">i</span></a>
      </h2>
      <p>
        These commands are for quickly applying common limits to integral signs.
      </p>
      <ul class="keybindings">
        <li><span class="keybinding">r</span> <em>(Reals):</em> <code>\int \to \int_{-\infty}^\infty</code></li>
        <li><span class="keybinding">p</span> <em>(Positive):</em> <code>\int \to \int_0^\infty</code></li>
        <li><span class="keybinding">n</span> <em>(Negative):</em> <code>\int \to \int_{-\infty}^0</code></li>
        <li><span class="keybinding">u</span> <em>(Unit):</em> <code>\int \to \int_0^1</code></li>
        <li><span class="keybinding">U</span> <em>(Symmetric unit):</em> <code>\int \to \int_{-1}^1</code></li>
        <li><span class="keybinding">t</span> <em>(Trigonometric):</em> <code>\int \to \int_0^{2\pi}</code></li>
        <li><span class="keybinding">T</span> <em>(Symmetric trigonometric):</em> <code>\int \to \int_{-\pi}^\pi</code></li>
      </ul>
      <p>
        These can apply to objects other than integral signs as well, for example:
        <code>\left.\frac{x^2}{2}\right| \to \left.\frac{x^2}{2}\right|_0^1</code>
      </p>

      <h2>
        <a name="placeholders">Placeholders</a>
      </h2>
      <p>
        Sometimes you may want to fill in part of an expression you are working on later, rather than including
        it immediately.  You can insert a <em>placeholder</em> marker in your expression, and then later on
        substitute another expression where the placeholder is.
      </p>
      <ul class="keybindings">
        <li>
          <span class="keybinding">&#39;</span><span class="keybinding">&#39;</span>
          Put a placeholder (<code>\htmlClass{defer_expr}{\blacksquare}</code>) onto the stack.
          You can treat it like any other subexpression, applying operations to it and using it
          in other expressions.  All placeholders are identical.
        </li>
        <li>
          <span class="keybinding">/</span><span class="keybinding">&#39;</span>
          Substitute the stack top item for the placeholder in the item below it.
          If there is more than placeholder, only the first one is substituted.
          Example: <code>\sqrt{1 + \htmlClass{defer_expr}{\blacksquare}} \enspace x^2 \to \sqrt{1+x^2}</code>
        </li>
      </ul>

      <h2>
        <a name="delimiters">Delimiters</a>
        <span class="keybinding">)</span>
      </h2>
      <p>
        These commands enclose the stack top in various kinds of delimiter pairs.
        The delimiters automatically expand to fit the size of their contents.
      </p>
      <p>
        Note that the most commonly-used delimiters are available directly as
        <span class="keybinding">(</span> <span class="keybinding">[</span> <span class="keybinding">{</span>
        without needing a prefix key.
      </p>
      <table class="keybindings"><tbody>
          <tr>
            <td><span class="keybinding">b</span> <code>\left\langle x\right\vert</code> (Dirac bra)</td>
            <td><span class="keybinding">c</span> <code>\left\lceil x\right\rceil</code> (ceiling)</td>
            <td><span class="keybinding">f</span> <code>\left\lfloor x\right\rfloor</code> (floor)</td>
          </tr>
          <tr>
            <td><span class="keybinding">g</span> <code>\left\lgroup x\right\rgroup</code> (grouped)</td>
            <td><span class="keybinding">i</span> <code>\left\langle x\middle\vert y\right\rangle</code> (bra-ket)</td>
            <td><span class="keybinding">I</span> <code>\left\langle x\middle\vert y\middle\vert z\right\rangle</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">k</span> <code>\left\vert x\right\rangle</code> (Dirac ket)</td>
            <td><span class="keybinding">m</span> <code>\left\lmoustache x\right\rmoustache</code></td>
            <td>
              <span class="keybinding">n</span> or <span class="keybinding">N</span>
              <code>\left\lVert x\right\rVert</code></td>
          </tr>
          <tr>
            <td>
              <span class="keybinding">w</span> or <span class="keybinding">W</span>
              <code>\left. x\right\vert</code> ("where")
            </td>
            <td><span class="keybinding">|</span> <code>\left\vert x\right\vert</code></td>
            <td><span class="keybinding">&lt;</span> <code>\left\langle x\right\rangle</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">(</span> <code>\left( x\right)</code></td>
            <td><span class="keybinding">[</span> <code>\left[ x\right]</code></td>
            <td><span class="keybinding">]</span> <code>\llbracket x\rrbracket</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">{</span> <code>\left\{ x\right\}</code></td>
            <td colspan="2"></td>
          </tr>
      </tbody></table>

      <h2>
        <a name="custom_delimiters">Custom Delimiters</a>
        <span class="keybinding">}</span>
      </h2>
      <p>
        If the particular delimiter pair you want is not available via the <span class="keybinding">)</span>
        prefix commands above, you can use <span class="keybinding">}</span> to create custom delimiter
        structures.
      </p>
      <p>
        Pressing <span class="keybinding">}</span> enters <em>custom delimiter</em> mode.  You can then
        enter two of the following keys, which will become the left and right delimiters around the stack top:
      </p>
      <table class="keybindings"><tbody>
          <tr>
            <td><span class="keybinding">&lt;</span> <code>\left\langle\right.</code></td>
            <td><span class="keybinding">&gt;</span> <code>\left.\right\rangle</code></td>
            <td><span class="keybinding">(</span> <code>\left(\right.</code></td>
            <td><span class="keybinding">)</span> <code>\left.\right)</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">[</span> <code>\left[\right.</code></td>
            <td><span class="keybinding">]</span> <code>\left.\right]</code></td>
            <td><span class="keybinding">{</span> <code>\left\{\right.</code></td>
            <td><span class="keybinding">}</span> <code>\left.\right\}</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">g</span> <code>\left\lgroup\right.</code></td>
            <td><span class="keybinding">G</span> <code>\left.\right\rgroup</code></td>
            <td><span class="keybinding">m</span> <code>\left\lmoustache\right.</code></td>
            <td><span class="keybinding">M</span> <code>\left.\right\rmoustache</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">c</span> <code>\left\lceil\right.</code></td>
            <td><span class="keybinding">C</span> <code>\left.\right\rceil</code></td>
            <td><span class="keybinding">f</span> <code>\left\lfloor\right.</code></td>
            <td><span class="keybinding">F</span> <code>\left.\right\rfloor</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">v</span> <code>\left.\right\Vert</code></td>
            <td><span class="keybinding">|</span> <code>\left.\right|</code></td>
            <td><span class="keybinding">/</span> <code>\left.\right/</code></td>
            <td><span class="keybinding">\</span> <code>\left.\right\backslash</code></td>
          </tr>
          <tr>
            <td colspan="2">
              <span class="keybinding">.</span> or <span class="keybinding">&nbsp;</span>
              <code>\left.\right.</code> (empty)
            </td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
      </tbody></table>
      <p>
        The "empty" delimiter can be used to create unbalanced expressions such as
        <code>\left.x+1\right)</code>.
      </p>
      <p>
        You can also create create grouped objects such as <code>\left\langle x \middle\vert y \middle\vert z \right\rangle</code>
        with &quot;middle&quot; separators that expand to fit their contents.  To do this, after pressing
        <span class="keybinding">}</span>, press a number key indicating how many items from the stack are to be grouped
        (e.g. 3 in the case of <code>\left\langle x \middle\vert y \middle\vert z \right\rangle</code>).
        Then press three of the delimiter keys above, which will become the left, right, and middle delimiters
        for the group.  Example:
        <span class="keybinding">x</span><span class="keybinding">y</span><span class="keybinding">z</span><span class="keybinding">w</span><span class="keybinding">}</span><span class="keybinding">4</span><span class="keybinding">c</span><span class="keybinding">F</span><span class="keybinding">v</span>
        <code>\to \left\lceil x\middle\Vert y\middle\Vert z\middle\Vert w\right\rfloor</code>
      </p>

      <h2>
        <a name="arrays">Array Operations</a>
        <span class="keybinding">|</span>
      </h2>
      <p>
        These commands are for building and manipulating arrayed structures like
        matrices, vectors and lists.
      </p>
      <p>
        <strong>NOTE:</strong>
        Several of these commands take required <em>prefix arguments</em> to indicate the number of
        items to work on.  These are entered by typing one or more digits after the
        <span class="keybinding">|</span> key and before the subcommand key.  For example,
        to build a matrix row with 3 columns you can type
        <span class="keybinding">|</span><span class="keybinding">3</span><span class="keybinding">(</span>.
        This prefix argument is referred to as N in the descriptions below.
      </p>
      <p>
        <b>Matrix Row Building:</b>
        The following commands assemble N items from the
        stack into a <code>1\times N</code> row matrix of the indicated type.
      </p>
      <table class="keybindings"><tbody>
          <tr>
            <td><span class="keybinding">(</span><code>\;\begin{pmatrix}a & b & c\end{pmatrix}</code></td>
            <td><span class="keybinding">[</span><code>\;\begin{bmatrix}a & b & c\end{bmatrix}</code></td>
            <td><span class="keybinding">{</span><code>\;\begin{Bmatrix}a & b & c\end{Bmatrix}</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">v</span><code>\;\begin{vmatrix}a & b & c\end{vmatrix}</code></td>
            <td><span class="keybinding">V</span><code>\;\begin{Vmatrix}a & b & c\end{Vmatrix}</code></td>
            <td><span class="keybinding">m</span><code>\;\begin{matrix}a & b & c\end{matrix}</code></td>
          </tr>
      </tbody></table>
      <p>
        To change the bracket type of an existing matrix on the stack, use
        <span class="keybinding">|</span><span class="keybinding">t</span> followed by one
        of the type keys above.  For example
        <span class="keybinding">|</span><span class="keybinding">t</span><span class="keybinding">{</span>
        changes the matrix to have curly braces.
      </p>
      <p>There are some shortcuts available for building common matrix and vector types:</p>
      <table class="keybindings"><tbody>
          <tr>
            <td>
              <span class="keybinding">$</span>
              <code>a\enspace b\enspace c\enspace d\to
                \begin{bmatrix} a & b \\ c & d \end{bmatrix}
              </code>
            </td>
            <td></td>
          </tr>
          <tr>
            <td>
              <span class="keybinding">@</span>
              <code>a\enspace b\to
                \begin{bmatrix} a \\ b \end{bmatrix}
              </code>
            </td>
            <td>
              <span class="keybinding">#</span>
              <code>a\enspace b\enspace c\to
                \begin{bmatrix} a \\ b \\ c\end{bmatrix}
              </code>
            </td>
          </tr>
      </tbody></table>

      <p>
        <b>Matrix Manipulation:</b> These commands operate on existing matrices.
      </p>
      <ul class="keybindings">
        <li><span class="keybinding">d</span>
          &quot;Dissolve&quot; a matrix, putting all its entries onto the stack
          in row-major order.
        </li>
        <li><span class="keybinding">E</span>
          Insert spaces and ellipses before the last row and column in a matrix,
          in order to notate a matrix that is not fully written out.
        </li>
        <li><span class="keybinding">s</span>
          Split a matrix into its component rows, putting each row onto the stack.
          To split by columns instead, use the <span class="keybinding">T</span> transpose
          command first.
        </li>
        <li><span class="keybinding">T</span>
          Transpose a matrix by exchanging its rows and columns.
        </li>
        <li>
          <span class="keybinding">Enter</span> or <span class="keybinding">|</span>
          Stack two matrices on top of each other.  Both must have the same number of columns.
          This is the main way to build matrices from individual rows.
        </li>
        <li>
          <span class="keybinding">h</span>
          Stack two matrices side by side.  Both must have the same number of rows.
        </li>
      </ul>

      <p>
        <b>Row and Column Separators:</b> These commands place separator lines between rows or columns of
        a matrix.  If lines are already there they will be removed instead.  A prefix argument may be used
        to specify which row or column the separator is to be placed after, otherwise the first row or column
        will be used.  A <span class="keybinding">*</span> prefix argument will apply separator lines to all
        rows or columns at once.
      </p>
      <ul class="keybindings">
        <li><span class="keybinding">!</span> Place a solid line between columns.</li>
        <li><span class="keybinding">:</span> Place a dashed line between columns.</li>
        <li><span class="keybinding">-</span> Place a solid line between rows.</li>
        <li><span class="keybinding">_</span> Place a dashed line between rows.</li>
      </ul>

      <p>
        <b>Alignment Building:</b>
        These commands build LaTeX alignment environments.
        Like the matrix row building operations, these also take a required prefix argument
        indicating how many items to combine.
      </p>
      <ul class="keybindings">
        <li>
          <span class="keybinding">a</span>
          Stack N equations together into a LaTeX <tt>align</tt> environment, aligned by their infix operator, if any.
        </li>
        <li>
          <span class="keybinding">g</span>
          Stack N equations together into a <tt>gathered</tt> environment,
          similar to <span class="keybinding">a</span> but each equation is centered on its own.
        </li>
        <li>
          <span class="keybinding">c</span>
          Build a list of N cases for a piecewise function definition.
          If the component items are infix expressions joined with a colon (:), they will be split up and
          placed as the left and right parts of the case structure.  For example:
          <code>x^2 : x \ge 0; \enspace 0 : x &lt; 0</code>
          <br />
          becomes
          <code>
            \begin{cases}
              x^2 & x \ge 0 \\
              0 & x &lt; 0
            \end{cases}
          </code>
        </li>
        <li>
          <span class="keybinding">C</span>
          Same as the above, but the brace is on the right instead of the left.
        </li>
        <li>
          <span class="keybinding">f</span> and <span class="keybinding">F</span>
          Same as <span class="keybinding">c</span> and <span class="keybinding">C</span>,
          but prepend the word "if" to the right-hand side of expressions joined with a colon.
          If there is no colon, the right-hand side becomes the word "otherwise" instead.  Example:
          <code>x^2 : x \ge 1; x^3 : 0 \le x \le 1; x^4</code>
          <br />
          becomes:
          <code>
            \begin{cases}
              x^2 & \mathrm{if}\enspace x \ge 1 \\
              x^3 & \mathrm{if}\enspace 0 \le x \le 1 \\
              x^4 & \mathrm{otherwise}
            \end{cases}
          </code>
        </li>
      </ul>

      <p>
        <b>List Building:</b>
        These commands build concatenated lists from individual items.
        As before, the number of items to concatenate must be given as a prefix argument.
      </p>
      <ul class="keybindings">
        <li><span class="keybinding">,</span> Concatenate N items with a comma between each one.</li>
        <li><span class="keybinding">&nbsp;</span> Concatenate with a comma between items, but also place a thin space after each comma.</li>
        <li><span class="keybinding">;</span> Concatenate with a semicolon and thin space between items.</li>
        <li>
          <span class="keybinding">.</span>
          Concatenate with a comma and thinspace, but put an ellipsis between the last items of the list:
          <code>x_1,\,x_2,\,\dots,\,x_n</code>
        </li>
        <li>
          <span class="keybinding">e</span>
          Like the above but with the ellipsis at the end:
          <code>x_1,\,x_2,\,x_n,\,\dots</code>
        </li>
        <li>
          <span class="keybinding">+</span>
          Like <span class="keybinding">.</span> but concatenate with +:
          <code>x_1 + x_2 + \cdots + x_n</code>
        </li>
        <li>
          <span class="keybinding">p</span>
          Like the above but with the ellipsis at the end:
          <code>x_1 + x_2 + x_n + \cdots</code>
        </li>
        <li>
          <span class="keybinding">k</span>
          Build a <em>stacked limits</em> object used for adding multiple subscripts or superscripts to a large
          operator such as <code>\sum</code>.  Place the resulting object as the subscript or superscript of
          the operator and they will be lined up in a stack underneath or above.
        </li>
      </ul>

      <h2>
        <a name="greek">Greek letters</a>
        <span class="keybinding">;</span>
        <span class="keybinding">:</span>
      </h2>
      <p>
        <strong>NOTE:</strong>
        The sequences
        <span class="keybinding">;</span><span class="keybinding">;</span>
        and
        <span class="keybinding">:</span><span class="keybinding">:</span>
        can be used as alternatives to
        <span class="keybinding">,</span><span class="keybinding">;</span>
        and
        <span class="keybinding">,</span><span class="keybinding">:</span>
      </p>
      <p>Lowercase Greek letters use the <span class="keybinding">;</span> prefix:</p>
      <table class="keybindings"><tbody>
          <tr>
            <td><span class="keybinding">a</span> <code>\alpha</code></td>
            <td><span class="keybinding">b</span> <code>\beta</code></td>
            <td><span class="keybinding">c</span> <code>\chi</code></td>
            <td><span class="keybinding">d</span> <code>\delta</code></td>
            <td><span class="keybinding">e</span> <code>\epsilon</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">f</span> <code>\phi</code></td>
            <td><span class="keybinding">g</span> <code>\gamma</code></td>
            <td><span class="keybinding">h</span> <code>\eta</code></td>
            <td><span class="keybinding">i</span> <code>\iota</code></td>
            <td><span class="keybinding">j</span> <code>\varphi</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">k</span> <code>\kappa</code></td>
            <td><span class="keybinding">l</span> <code>\lambda</code></td>
            <td><span class="keybinding">m</span> <code>\mu</code></td>
            <td><span class="keybinding">n</span> <code>\nu</code></td>
            <td><span class="keybinding">o</span> <code>\omega</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">p</span> <code>\pi</code></td>
            <td><span class="keybinding">q</span> <code>\vartheta</code></td>
            <td><span class="keybinding">r</span> <code>\rho</code></td>
            <td><span class="keybinding">s</span> <code>\sigma</code></td>
            <td><span class="keybinding">t</span> <code>\tau</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">u</span> <code>\upsilon</code></td>
            <td><span class="keybinding">v</span> <code>\theta</code></td>
            <td><span class="keybinding">w</span> <code>\omega</code></td>
            <td><span class="keybinding">x</span> <code>\xi</code></td>
            <td><span class="keybinding">y</span> <code>\psi</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">z</span> <code>\zeta</code></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
      </tbody></table>
      <p>Uppercase Greek letters (and some variants) use the <span class="keybinding">:</span> prefix:</p>
      <table class="keybindings"><tbody>
          <tr>
            <td><span class="keybinding">d</span> <code>\Delta</code></td>
            <td><span class="keybinding">e</span> <code>\varepsilon</code></td>
            <td><span class="keybinding">f</span> <code>\Phi</code></td>
            <td><span class="keybinding">g</span> <code>\Gamma</code></td>
            <td><span class="keybinding">k</span> <code>\varkappa</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">l</span> <code>\Lambda</code></td>
            <td><span class="keybinding">m</span> <code>\varpi</code></td>
            <td><span class="keybinding">n</span> <code>\nabla</code></td>
            <td><span class="keybinding">o</span> <code>\Omega</code></td>
            <td><span class="keybinding">p</span> <code>\Pi</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">q</span> <code>\vartheta</code></td>
            <td><span class="keybinding">r</span> <code>\varrho</code></td>
            <td><span class="keybinding">s</span> <code>\Sigma</code></td>
            <td><span class="keybinding">t</span> <code>\varsigma</code></td>
            <td><span class="keybinding">u</span> <code>\Upsilon</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">v</span> <code>\Theta</code></td>
            <td><span class="keybinding">w</span> <code>\Omega</code></td>
            <td><span class="keybinding">x</span> <code>\Xi</code></td>
            <td><span class="keybinding">y</span> <code>\Psi</code></td>
            <td><span class="keybinding">6</span> <code>\digamma</code></td>
          </tr>
      </tbody></table>
      <p>
        Italic-slanted variants of uppercase Greek letters are also available using
        the <span class="keybinding">;</span><span class="keybinding">:</span> prefix:
      </p>
      <table class="keybindings"><tbody>
          <tr>
            <td><span class="keybinding">d</span> <code>\varDelta</code></td>
            <td><span class="keybinding">f</span> <code>\varPhi</code></td>
            <td><span class="keybinding">g</span> <code>\varGamma</code></td>
            <td><span class="keybinding">l</span> <code>\varLambda</code></td>
            <td><span class="keybinding">o</span> <code>\varOmega</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">p</span> <code>\varPi</code></td>
            <td><span class="keybinding">q</span> <code>\varTheta</code></td>
            <td><span class="keybinding">s</span> <code>\varSigma</code></td>
            <td><span class="keybinding">u</span> <code>\varUpsilon</code></td>
            <td><span class="keybinding">x</span> <code>\varXi</code></td>
          </tr>
          <tr>
            <td><span class="keybinding">y</span> <code>\varPsi</code></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
      </tbody></table>
      <p>
        <strong>NOTE:</strong>
        As a convenience, you can use uppercase keystrokes as well as lowercase in
        order to type the Greek letters that use <span class="keybinding">:</span>
        or <span class="keybinding">;</span><span class="keybinding">:</span>.
      </p>
      <h2>
        <a name="configuration">Configuration</a>
        <span class="keybinding">$</span>
      </h2>
      <p>
        These commands let you change global configuration settings.
        The settings are saved between sessions in your web browser's <tt>localStorage</tt>.
      </p>
      <ul class="keybindings">
        <li>
          <em>Panel Layout subcommands:</em>
          <ul class="keybindings">
            <li>
              <span class="keybinding">s</span><span class="keybinding">&larr;&rarr;&uarr;&darr;</span>
              Switch the position of the stack panel relative to the document panel.
            </li>
            <li>
              <span class="keybinding">s</span><span class="keybinding">0-9</span>,
              <span class="keybinding">s</span><span class="keybinding">*</span>
              Select the percentage of the window width (or height) that the stack panel will occupy.  0-9 select 0% through 90%, and * selects 100%.
            </li>
          </ul>
        </li>
        <li>
          <em>Math Alignment subcommands:</em>
          <ul class="keybindings">
            <li>
              <span class="keybinding">m</span><span class="keybinding">s</span>
              Toggle whether to show math expressions in the stack area aligned to the left or to the right.
            </li>
            <li>
              <span class="keybinding">m</span><span class="keybinding">d</span>
              Same but for the document area instead.
            </li>
          </ul>
        </li>
        <li>
          <em>Zoom Factor subcommands:</em>
          <ul class="keybindings">
            <li><span class="keybinding">z</span><span class="keybinding">+</span> Increase text zoom by 5%.</li>
            <li><span class="keybinding">z</span><span class="keybinding">-</span> Decrease text zoom by 5%.</li>
            <li><span class="keybinding">z</span><span class="keybinding">0</span> Reset zoom factor back to the default.</li>
          </ul>
        </li>
        <li>
          <span class="keybinding">i</span>
          Toggle between full-size math display (the default) and compact inline math display modes.
        </li>
        <li>
          <span class="keybinding">t</span><span class="keybinding">0-3</span>
          Switch between 4 different color themes.
        </li>
        <li>
          <span class="keybinding">r</span> Reset all the layout configurations to their initial defaults.
        </li>
        <li>
          <span class="keybinding">$</span>
          Put a literal $ symbol onto the stack.
        </li>
      </ul>

      <h2>
        <a name="control_keys">Control Keys</a>
      </h2>
      <p>
        For maximum browser compatibility, Control and Alt keys are not required.
        However, these Control key based shortcuts are available for optional use:
      </p>
      <ul class="keybindings">
        <li><span class="keybinding">Ctrl+0</span>
          Add a 0 subscript: <code>x_0</code>
          (same as <span class="keybinding">.</span><span class="keybinding">0</span>)
        </li>
        <li>
          <span class="keybinding">Ctrl+1</span> <span class="keybinding">Ctrl+2</span>
          <span class="keybinding">Ctrl+3</span> <span class="keybinding">Ctrl+4</span>
          Add other superscripts: <code>x^{-1}, x^2, x^3, x^4</code>
          (same as <span class="keybinding">.</span><span class="keybinding">1</span>, etc.)
        </li>
        <li><span class="keybinding">Ctrl+a</span>
          Swap the top two stack top items
          (same as <span class="keybinding">Tab</span><span class="keybinding">a</span>)
        </li>
        <li><span class="keybinding">Ctrl+b</span>
          Apply a bold font to the stack top
          (same as <span class="keybinding">]</span>)
        </li>
        <li><span class="keybinding">Ctrl+c</span>
          Copy stack top to clipboard
          (same as <span class="keybinding">Tab</span><span class="keybinding">c</span>)
        </li>
        <li><span class="keybinding">Ctrl+e</span>
          <code>x \to \mathrm{e}^x</code>
          (same as <span class="keybinding">/</span><span class="keybinding">e</span>)
        </li>
        <li><span class="keybinding">Ctrl+i</span>
          Move the stack top into the document at the current selection position
          (same as <span class="keybinding">Tab</span><span class="keybinding">i</span>)
        </li>
        <li><span class="keybinding">Ctrl+j</span>
          Move the current document selection back onto the stack
          (same as <span class="keybinding">Tab</span><span class="keybinding">j</span>)
        </li>
        <li>
          <span class="keybinding">Ctrl+k</span> or
          <span class="keybinding">Ctrl+Space</span>
          Join the top two stack entries with a space between them
          (same as <span class="keybinding">,</span><span class="keybinding">s</span>)
        </li>
        <li><span class="keybinding">Ctrl+l</span>
          Recenter the document view around the current document selection
          (same as <span class="keybinding">Tab</span><span class="keybinding">l</span>)
        </li>
        <li><span class="keybinding">Ctrl+m</span>
          <code>x \to -x</code>
          Prepend a minus sign to the stack top
          (same as <span class="keybinding">.</span><span class="keybinding">-</span>)
        </li>
        <li><span class="keybinding">Ctrl+n</span>
          Add a 1 subscript: <code>x_1</code>
          (same as <span class="keybinding">.</span><span class="keybinding">1</span>);
          mnemonic: o<strong>n</strong>e
        </li>
        <li><span class="keybinding">Ctrl+o</span>
          <code>f\enspace x \to f(x)</code>
          (same as <span class="keybinding">/</span><span class="keybinding">o</span>)
        </li>
        <li><span class="keybinding">Ctrl+p</span>
          Enclose the stack top in parentheses
          (same as <span class="keybinding">(</span>)
        </li>
        <li><span class="keybinding">Ctrl+r</span>
          <code>f\enspace y\enspace x \to f(y, x)</code>
          (same as <span class="keybinding">/</span><span class="keybinding">r</span>)
        </li>
        <li><span class="keybinding">Ctrl+s</span>
          Save the current document
          (same as <span class="keybinding">Tab</span><span class="keybinding">s</span>)
        </li>
        <li><span class="keybinding">Ctrl+t</span>
          Add a 2 subscript: <code>x_2</code>
          (same as <span class="keybinding">.</span><span class="keybinding">2</span>);
          mnemonic: <strong>t</strong>wo
        </li>
        <li><span class="keybinding">Ctrl+u</span>
          Make superscript (same as <span class="keybinding">`</span>)
        </li>
        <li><span class="keybinding">Ctrl+v</span>
          Paste clipboard to stack top
          (same as <span class="keybinding">Tab</span><span class="keybinding">v</span>)
        </li>
        <li><span class="keybinding">Ctrl+z</span>
          Undo last action
          (same as <span class="keybinding">Tab</span><span class="keybinding">Tab</span>)
        </li>
        <li>
          <span class="keybinding">Ctrl+y</span> Redo actions undone by 'undo'
          (same as <span class="keybinding">Tab</span><span class="keybinding">.</span>)
        </li>
        <li>
          <span class="keybinding">Ctrl+/</span>
          <code>y\enspace x \to \displaystyle\frac{y}{x}</code>
          (same as <span class="keybinding">/</span><span class="keybinding">/</span>)
        </li>
        <li>
          <span class="keybinding">Ctrl+,</span> Join two items with a comma
          (same as <span class="keybinding">,</span><span class="keybinding">,</span>)
        </li>
        <li>
          <span class="keybinding">Ctrl+Space</span> Join two items with a space
          (same as <span class="keybinding">,</span><span class="keybinding">s</span>)
        </li>
        <li>
          <span class="keybinding">Ctrl+&larr;&rarr;</span>
          <em>(left/right arrows)</em> Scroll the document panel left or right if the contents are too wide
          (same as <span class="keybinding">Tab</span>+<span class="keybinding">&larr;</span><span class="keybinding">&rarr;</span>)
        </li>
      </ul>
    </div>
  </body>
</html>
